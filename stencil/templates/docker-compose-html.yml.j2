  format-md:
    image: docker.io/library/node:lts-alpine
    container_name: md-formatter
    volumes:
      - .:/workspace:z
    working_dir: /workspace
    environment:
      - NPM_CONFIG_UPDATE_NOTIFIER=false
    entrypoint:
      - sh
      - -c
      - |
        echo "Formatting markdown files..."
        npm install --prefix /tmp/fmt prettier @awmottaz/prettier-plugin-void-html && \
        /tmp/fmt/node_modules/.bin/prettier \
          --plugin /tmp/fmt/node_modules/@awmottaz/prettier-plugin-void-html/prettier-plugin-void-html.js \
          --prose-wrap always --print-width 100 --write "*.md"
    restart: "no"

  doc:
    image: docker.io/pandoc/core:latest
    container_name: doc-generator
    volumes:
      - .:/workspace:z
    working_dir: /workspace
    entrypoint:
      - pandoc
      - --standalone
      - --template=html-template.html
      - --lua-filter=hidden-filter.lua
      - --mathml
    restart: "no"
