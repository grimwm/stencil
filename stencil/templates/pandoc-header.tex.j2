{% raw %}% Safety net: wrap long code lines instead of running off the page.
\usepackage{fvextra}
\fvset{breaklines, breaksymbol={}}

% Card-style blockquotes (for callouts, notes, "Think about it" prompts, etc.)
\usepackage[most]{tcolorbox}
\definecolor{cardbackground}{RGB}{255, 253, 245}
\definecolor{cardborder}{RGB}{200, 180, 140}
\definecolor{cardshadow}{RGB}{180, 180, 180}

\renewenvironment{quote}{%
  \begin{tcolorbox}[
    colback=cardbackground,
    colframe=cardborder,
    boxrule=0.8pt,
    arc=3pt,
    left=10pt,
    right=10pt,
    top=8pt,
    bottom=8pt,
    shadow={2pt}{-2pt}{0pt}{cardshadow},
    fontupper=\small\itshape,
    before skip=12pt,
    after skip=12pt,
  ]
}{%
  \end{tcolorbox}
}

% Table styling â€“ colors, row padding (layout handled by table-style.lua filter).
\usepackage{calc}
\usepackage{longtable}
\usepackage{colortbl}
\definecolor{tableheader}{RGB}{210, 222, 242}
\definecolor{tableaccent}{RGB}{41, 65, 122}
\definecolor{tablestripe}{RGB}{245, 247, 250}
\definecolor{cellborder}{RGB}{200, 200, 200}
\renewcommand{\arraystretch}{1.4}

% Suppress all tagpdf tagging inside Pandoc's code block environments
% to prevent struct-faulty-nesting errors with native syntax highlighting.
\ExplSyntaxOn
\AddToHook{env/Shaded/begin}{\tagpdfparaOff \tag_stop:}
\AddToHook{env/Shaded/end}{\tag_start: \tagpdfparaOn}
\ExplSyntaxOff
{% endraw %}
