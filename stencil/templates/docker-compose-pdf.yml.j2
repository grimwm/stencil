  format-md:
    image: docker.io/library/node:lts-alpine
    container_name: md-formatter
    volumes:
      - .:/workspace:z
    working_dir: /workspace
    environment:
      - NPM_CONFIG_UPDATE_NOTIFIER=false
    entrypoint:
      - sh
      - -c
      - |
        echo "Formatting markdown files..."
        npx --yes prettier --prose-wrap always --print-width 100 --write "*.md"
    restart: "no"

  pdf:
    build:
      context: .
      dockerfile: Dockerfile.pdf
    platform: linux/amd64
    container_name: pdf-generator
    volumes:
      - .:/workspace:z
    working_dir: /workspace
    entrypoint:
      - pandoc
      - --pdf-engine=lualatex
      - --template=pandoc-template.latex
      - --include-in-header=pandoc-header.tex
      - --lua-filter=table-style.lua
      - --variable
      - geometry:left=1in,right=1in,top=1in,bottom=1in
      - --variable
      - mainfont:DejaVu Sans
      - --variable
      - monofont:DejaVu Sans Mono
    restart: "no"
